resources:
  - repo: self

trigger:
  batch: true
  branches:
    include:
      - main
      - refs/tags/queue/*

pr:
  branches:
    include:
      - main
      - refs/tags/queue/*
  paths:
    include:
      - queue

variables:
  - group: "Code Signing Certificates"
  - group: "Middleware Tests"
  - name: BuildConfiguration
    value: release
  - name: Solution
    value: "fiskaltrust.Middleware.sln"
  - name: WorkingDirectory
    value: "queue"
  - name: vmImageName
    value: "windows-2022"

stages:
  - stage: Build
    jobs:
      - job: BuildNugetPackages
        displayName: Build v1 NuGet packages
        dependsOn: []
        pool:
          vmImage: $(vmImageName)
        steps:
          - template: templates/queue/build-nuget.template.yml
