name: 'Deploy v1 Packages'

inputs:
  directory:
    required: true
    type: string
  package:
    required: true
    type: string
  storageAccountName:
    required: true
    type: string
  sas:
    required: true
    type: string

runs:
  using: "composite"
  steps:
    - name: Azure CLI script
      uses: azure/cli@v2
      with:
        azcliversion: latest
        inlineScript: |
          az storage blob upload-batch --account-name ${{ inputs.storageAccountName }} -d "packages" -s "${{ inputs.directory }}" --pattern "${{ inputs.package }}.*.nupkg"
      env:
        AZURE_STORAGE_SAS_TOKEN: ${{ inputs.sas }}